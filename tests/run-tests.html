<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Multiplication Trainer - Unit Tests</title>
    <style>
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            max-width: 800px;
            margin: 0 auto;
            padding: 2rem;
            background: #f5f5f5;
        }
        
        .test-container {
            background: white;
            border-radius: 8px;
            padding: 2rem;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
            margin-bottom: 2rem;
        }
        
        h1 {
            color: #333;
            text-align: center;
            margin-bottom: 2rem;
        }
        
        h2 {
            color: #666;
            border-bottom: 2px solid #eee;
            padding-bottom: 0.5rem;
        }
        
        .test-results {
            background: #f8f9fa;
            border-radius: 4px;
            padding: 1rem;
            margin: 1rem 0;
            font-family: 'Courier New', monospace;
            white-space: pre-wrap;
        }
        
        .run-button {
            background: #007bff;
            color: white;
            border: none;
            padding: 0.75rem 1.5rem;
            border-radius: 4px;
            cursor: pointer;
            font-size: 1rem;
            margin: 0.5rem;
        }
        
        .run-button:hover {
            background: #0056b3;
        }
        
        .run-button:disabled {
            background: #6c757d;
            cursor: not-allowed;
        }
    </style>
</head>
<body>
    <h1>üß™ Multiplication Trainer - Unit Tests</h1>
    
    <div class="test-container">
        <h2>Question Generator Tests</h2>
        <button id="run-question-tests" class="run-button">Run Question Generator Tests</button>
        <div id="question-results" class="test-results" style="display: none;"></div>
    </div>
    
    <div class="test-container">
        <h2>Timer Tests</h2>
        <button id="run-timer-tests" class="run-button">Run Timer Tests</button>
        <div id="timer-results" class="test-results" style="display: none;"></div>
    </div>
    
    <div class="test-container">
        <h2>Storage Tests</h2>
        <button id="run-storage-tests" class="run-button">Run Storage Tests</button>
        <div id="storage-results" class="test-results" style="display: none;"></div>
    </div>
    
    <div class="test-container">
        <h2>Run All Tests</h2>
        <button id="run-all-tests" class="run-button">Run All Tests</button>
        <div id="all-results" class="test-results" style="display: none;"></div>
    </div>

    <script type="module">
        // Test runner for browser environment
        class BrowserTestRunner {
            constructor() {
                this.setupEventListeners();
            }
            
            setupEventListeners() {
                document.getElementById('run-question-tests').addEventListener('click', () => {
                    this.runQuestionTests();
                });
                
                document.getElementById('run-timer-tests').addEventListener('click', () => {
                    this.runTimerTests();
                });
                
                document.getElementById('run-storage-tests').addEventListener('click', () => {
                    this.runStorageTests();
                });
                
                document.getElementById('run-all-tests').addEventListener('click', () => {
                    this.runAllTests();
                });
            }
            
            async runQuestionTests() {
                const button = document.getElementById('run-question-tests');
                const results = document.getElementById('question-results');
                
                button.disabled = true;
                button.textContent = 'Running...';
                results.style.display = 'block';
                results.textContent = 'Loading test file...';
                
                try {
                    // Capture console output
                    const originalLog = console.log;
                    let testOutput = '';
                    console.log = (...args) => {
                        testOutput += args.join(' ') + '\n';
                        originalLog(...args);
                    };
                    
                    // Import and run the test file
                    await import('./test-question-generator.js');
                    
                    // Restore console.log
                    console.log = originalLog;
                    
                    results.textContent = testOutput || 'Tests completed successfully!';
                } catch (error) {
                    results.textContent = `Error running tests: ${error.message}`;
                }
                
                button.disabled = false;
                button.textContent = 'Run Question Generator Tests';
            }
            
            async runTimerTests() {
                const button = document.getElementById('run-timer-tests');
                const results = document.getElementById('timer-results');
                
                button.disabled = true;
                button.textContent = 'Running...';
                results.style.display = 'block';
                results.textContent = 'Loading test file...';
                
                try {
                    // Capture console output
                    const originalLog = console.log;
                    let testOutput = '';
                    console.log = (...args) => {
                        testOutput += args.join(' ') + '\n';
                        originalLog(...args);
                    };
                    
                    // Import and run the test file
                    await import('./test-timer.js');
                    
                    // Restore console.log
                    console.log = originalLog;
                    
                    results.textContent = testOutput || 'Tests completed successfully!';
                } catch (error) {
                    results.textContent = `Error running tests: ${error.message}`;
                }
                
                button.disabled = false;
                button.textContent = 'Run Timer Tests';
            }
            
            async runStorageTests() {
                const button = document.getElementById('run-storage-tests');
                const results = document.getElementById('storage-results');
                
                button.disabled = true;
                button.textContent = 'Running...';
                results.style.display = 'block';
                results.textContent = 'Loading test file...';
                
                try {
                    // Capture console output
                    const originalLog = console.log;
                    let testOutput = '';
                    console.log = (...args) => {
                        testOutput += args.join(' ') + '\n';
                        originalLog(...args);
                    };
                    
                    // Import and run the test file
                    await import('./test-storage.js');
                    
                    // Restore console.log
                    console.log = originalLog;
                    
                    results.textContent = testOutput || 'Tests completed successfully!';
                } catch (error) {
                    results.textContent = `Error running tests: ${error.message}`;
                }
                
                button.disabled = false;
                button.textContent = 'Run Storage Tests';
            }
            
            async runAllTests() {
                const button = document.getElementById('run-all-tests');
                const results = document.getElementById('all-results');
                
                button.disabled = true;
                button.textContent = 'Running All Tests...';
                results.style.display = 'block';
                results.textContent = 'Running all test suites...\n\n';
                
                try {
                    // Run all tests sequentially
                    results.textContent += 'Running Question Generator Tests...\n';
                    await this.runQuestionTests();
                    results.textContent += '‚úÖ Question Generator Tests completed\n\n';
                    
                    results.textContent += 'Running Timer Tests...\n';
                    await this.runTimerTests();
                    results.textContent += '‚úÖ Timer Tests completed\n\n';
                    
                    results.textContent += 'Running Storage Tests...\n';
                    await this.runStorageTests();
                    results.textContent += '‚úÖ Storage Tests completed\n\n';
                    
                    results.textContent += 'üéâ All tests completed successfully!';
                } catch (error) {
                    results.textContent += `‚ùå Error running tests: ${error.message}`;
                }
                
                button.disabled = false;
                button.textContent = 'Run All Tests';
            }
        }
        
        // Initialize test runner
        new BrowserTestRunner();
    </script>
</body>
</html>
