<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ุงููุชุงุฆุฌ - ุชุฏุฑูุจ ุณูุจุฑูุงูุฏ</title>
    <!-- Google Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Cairo:wght@200;300;400;500;600;700;800;900&family=Tajawal:wght@200;300;400;500;700;800;900&family=Poppins:ital,wght@0,100;0,200;0,300;0,400;0,500;0,600;0,700;0,800;0,900;1,100;1,200;1,300;1,400;1,500;1,600;1,700;1,800;1,900&display=swap" rel="stylesheet">
    
    <link rel="stylesheet" href="../css/main.css">
    <link rel="stylesheet" href="../css/themes.css">
    <link rel="manifest" href="../../manifest.json">
    <meta name="theme-color" content="#4f46e5">
</head>
<body class="light-theme">
    <!-- Professional Header Component -->
    <header class="header" role="banner">
        <div class="container">
            <!-- Logo Section - Left side with semantic structure -->
            <a href="../../index.html" class="logo" aria-label="ุงูุนูุฏุฉ ุฅูู ุงูุตูุญุฉ ุงูุฑุฆูุณูุฉ">
                <span class="logo-icon" aria-hidden="true">
                    <img src="../favicon.ico" alt="SuperMind Trainer" style="width: 24px; height: 24px;">
                </span>
                <span class="logo-text" data-ar="ุงููุชุงุฆุฌ" data-en="Results">ุงููุชุงุฆุฌ</span>
            </a>
            
            <!-- Header Controls - Right side with proper ARIA labels -->
            <nav class="header-controls" role="toolbar" aria-label="ุฅุนุฏุงุฏุงุช ุงูุชุทุจูู">
                <button 
                    id="back-btn" 
                    class="btn btn-secondary" 
                    type="button"
                    aria-label="ุงูุนูุฏุฉ ุฅูู ุงูุตูุญุฉ ุงูุฑุฆูุณูุฉ"
                    title="ุงูุนูุฏุฉ">
                    <span class="back-icon" aria-hidden="true"></span>
                </button>
                <button 
                    id="theme-toggle" 
                    class="btn btn-icon" 
                    type="button"
                    aria-label="ุชุจุฏูู ุจูู ุงููุถุน ุงููุงุชุญ ูุงูุฏุงูู"
                    aria-pressed="false"
                    title="ุชุจุฏูู ุงูุซูู">
                    <span class="theme-icon" aria-hidden="true">๐</span>
                </button>
                <button 
                    id="language-toggle" 
                    class="btn btn-icon" 
                    type="button"
                    aria-label="ุชุจุฏูู ุงููุบุฉ ุจูู ุงูุนุฑุจูุฉ ูุงูุฅูุฌููุฒูุฉ"
                    aria-pressed="false"
                    title="ุชุจุฏูู ุงููุบุฉ">
                    <span class="lang-icon" aria-hidden="true">EN</span>
                </button>
            </nav>
        </div>
    </header>

    <main class="main">
        <div class="container">
            <!-- Results Summary -->
            <div class="results-summary">
                <div class="summary-card">
                    <div class="summary-header">
                        <h2 data-ar="ููุฎุต ุงููุชุงุฆุฌ" data-en="Results Summary">ููุฎุต ุงููุชุงุฆุฌ</h2>
                        <div class="test-type" id="test-type">
                            <span data-ar="ูุถุน ุงูุชุฏุฑูุจ" data-en="Training Mode">ูุถุน ุงูุชุฏุฑูุจ</span>
                        </div>
                    </div>
                    <div class="summary-content">
                        <div class="score-display">
                            <div class="score-circle">
                                <span id="final-score">85%</span>
                            </div>
                            <div class="score-label" data-ar="ุงููุชูุฌุฉ ุงูููุงุฆูุฉ" data-en="Final Score">ุงููุชูุฌุฉ ุงูููุงุฆูุฉ</div>
                        </div>
                        <div class="summary-stats">
                            <div class="stat-item">
                                <span class="stat-value correct" id="correct-answers">8</span>
                                <span class="stat-label" data-ar="ุตุญูุญ" data-en="Correct">ุตุญูุญ</span>
                            </div>
                            <div class="stat-item">
                                <span class="stat-value wrong" id="wrong-answers">2</span>
                                <span class="stat-label" data-ar="ุฎุทุฃ" data-en="Wrong">ุฎุทุฃ</span>
                            </div>
                            <div class="stat-item">
                                <span class="stat-value" id="total-time">02:30</span>
                                <span class="stat-label" data-ar="ุงูููุช" data-en="Time">ุงูููุช</span>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Detailed Results -->
            <div class="detailed-results">
                <div class="results-header">
                    <h3 data-ar="ุชูุงุตูู ุงูุฃุณุฆูุฉ" data-en="Question Details">ุชูุงุตูู ุงูุฃุณุฆูุฉ</h3>
                    <div class="results-actions">
                        <button class="btn btn-secondary" id="export-csv">
                            <span class="btn-icon">๐ฅ</span>
                            <span data-ar="ุชุตุฏูุฑ CSV" data-en="Export CSV">ุชุตุฏูุฑ CSV</span>
                        </button>
                        
                        <button class="btn btn-secondary" id="print-results">
                            <span class="btn-icon">๐จ๏ธ</span>
                            <span data-ar="ุทุจุงุนุฉ" data-en="Print">ุทุจุงุนุฉ</span>
                        </button>
                    </div>
                </div>
                <div class="questions-list" id="questions-list">
                    <!-- Questions will be populated by JavaScript -->
                </div>
            </div>

            <!-- Performance Analysis -->
            <div class="performance-analysis">
                <h3 data-ar="ุชุญููู ุงูุฃุฏุงุก" data-en="Performance Analysis">ุชุญููู ุงูุฃุฏุงุก</h3>
                <div class="analysis-grid">
                    <div class="analysis-card">
                        <div class="analysis-icon">โก</div>
                        <div class="analysis-content">
                            <h4 data-ar="ุณุฑุนุฉ ุงูุฅุฌุงุจุฉ" data-en="Answer Speed">ุณุฑุนุฉ ุงูุฅุฌุงุจุฉ</h4>
                            <p id="avg-response-time" data-ar="ูุชูุณุท ุงูููุช: 15 ุซุงููุฉ" data-en="Average time: 15 seconds">
                                <span data-ar="ูุชูุณุท ุงูููุช: 15 ุซุงููุฉ" data-en="Average time: 15 seconds">ูุชูุณุท ุงูููุช: 15 ุซุงููุฉ</span>
                            </p>
                        </div>
                    </div>
                    <div class="analysis-card">
                        <div class="analysis-icon">๐ฏ</div>
                        <div class="analysis-content">
                            <h4 data-ar="ุฏูุฉ ุงูุฅุฌุงุจุฉ" data-en="Accuracy">ุฏูุฉ ุงูุฅุฌุงุจุฉ</h4>
                            <p id="accuracy-rate" data-ar="ูุนุฏู ุงูุฏูุฉ: 80%" data-en="Accuracy rate: 80%">
                                <span data-ar="ูุนุฏู ุงูุฏูุฉ: 80%" data-en="Accuracy rate: 80%">ูุนุฏู ุงูุฏูุฉ: 80%</span>
                            </p>
                        </div>
                    </div>
                    <div class="analysis-card">
                        <div class="analysis-icon">๐</div>
                        <div class="analysis-content">
                            <h4 data-ar="ุงูุชูุฏู" data-en="Progress">ุงูุชูุฏู</h4>
                            <p id="progress-indicator" data-ar="ุชุญุณู ููุงุฑูุฉ ุจุงูุฌูุณุฉ ุงูุณุงุจูุฉ" data-en="Improved from last session">
                                <span data-ar="ุชุญุณู ููุงุฑูุฉ ุจุงูุฌูุณุฉ ุงูุณุงุจูุฉ" data-en="Improved from last session">ุชุญุณู ููุงุฑูุฉ ุจุงูุฌูุณุฉ ุงูุณุงุจูุฉ</span>
                            </p>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Action Buttons -->
            <div class="action-buttons">
                <button class="btn btn-secondary" id="retry-test">
                    <span class="btn-icon">๐</span>
                    <span data-ar="ุฅุนุงุฏุฉ ุงูุงุฎุชุจุงุฑ" data-en="Retry Test">ุฅุนุงุฏุฉ ุงูุงุฎุชุจุงุฑ</span>
                </button>
                <button class="btn btn-primary" id="new-test">
                    <span class="btn-icon">โจ</span>
                    <span data-ar="ุงุฎุชุจุงุฑ ุฌุฏูุฏ" data-en="New Test">ุงุฎุชุจุงุฑ ุฌุฏูุฏ</span>
                </button>
                <button class="btn btn-secondary" id="save-score">
                    <span class="btn-icon">๐พ</span>
                    <span data-ar="ุญูุธ ุงููุชูุฌุฉ" data-en="Save Score">ุญูุธ ุงููุชูุฌุฉ</span>
                </button>
            </div>
        </div>
    </main>

    <!-- Save Score Modal -->
    <div id="save-score-modal" class="modal" role="dialog" aria-labelledby="save-score-title" aria-hidden="true">
        <div class="modal-content">
            <div class="modal-header">
                <h2 id="save-score-title" data-ar="ุญูุธ ุงููุชูุฌุฉ" data-en="Save Score">ุญูุธ ุงููุชูุฌุฉ</h2>
                <button class="modal-close" aria-label="ุฅุบูุงู">
                    <span>&times;</span>
                </button>
            </div>
            <div class="modal-body">
                <form id="save-score-form">
                    <div class="form-group">
                        <label for="player-name" data-ar="ุงุณู ุงููุงุนุจ" data-en="Player Name">ุงุณู ุงููุงุนุจ</label>
                        <input type="text" id="player-name" name="playerName" required 
                               placeholder="ุฃุฏุฎู ุงุณูู" data-placeholder-ar="ุฃุฏุฎู ุงุณูู" data-placeholder-en="Enter your name">
                    </div>
                    <div class="form-group">
                        <label for="score-comment" data-ar="ุชุนููู (ุงุฎุชูุงุฑู)" data-en="Comment (Optional)">ุชุนููู (ุงุฎุชูุงุฑู)</label>
                        <textarea id="score-comment" name="scoreComment" rows="3" 
                                  placeholder="ุฃุถู ุชุนูููุงู ุนูู ุฃุฏุงุฆู" data-placeholder-ar="ุฃุถู ุชุนูููุงู ุนูู ุฃุฏุงุฆู" data-placeholder-en="Add a comment about your performance"></textarea>
                    </div>
                </form>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-secondary" id="cancel-save">
                    <span data-ar="ุฅูุบุงุก" data-en="Cancel">ุฅูุบุงุก</span>
                </button>
                <button type="button" class="btn btn-primary" id="confirm-save">
                    <span data-ar="ุญูุธ" data-en="Save">ุญูุธ</span>
                </button>
            </div>
        </div>
    </div>

    <!-- Confetti Animation Container -->
    <div id="confetti-container"></div>

    <footer class="footer">
        <div class="container">
            <p data-ar="ยฉ2025 ุชุฏุฑูุจ ุณูุจุฑูุงูุฏ - ุชุทููุฑ ููุงู ูุตุงุจ" data-en="ยฉ 2024 SuperMind Trainer - Interactive Educational Development">
                ยฉ2025 ุชุฏุฑูุจ ุณูุจุฑูุงูุฏ - ุชุทููุฑ ููุงู ูุตุงุจ
            </p>
        </div>
    </footer>

    <script type="module" src="../js/utils.js"></script>
    <script type="module" src="../js/results.js"></script>
</body>
</html>